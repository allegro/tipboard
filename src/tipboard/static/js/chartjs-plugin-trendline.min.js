var pluginTrendlineLinear={beforeDraw:function(e){var s,a;for(var t in e.scales)if("x"==t[0]?a=e.scales[t]:s=e.scales[t],a&&s)break;var n=e.chart.ctx;e.data.datasets.forEach(function(t,i){t.trendlineLinear&&e.isDatasetVisible(i)&&addFitter(e.getDatasetMeta(i),n,t,a,s)}),n.setLineDash([])}};function addFitter(t,i,e,s,a){var n=e.trendlineLinear.style||e.borderColor,r=e.trendlineLinear.width||e.borderWidth,h=e.trendlineLinear.lineStyle||"solid";n=void 0!==n?n:"rgba(169,169,169, .6)",r=void 0!==r?r:3;var o=new LineFitter,u=e.data.length-1,d=t.data[0]._model.x,l=t.data[u]._model.x,m=!1;e.data&&"object"==typeof e.data[0]&&(m=!0),e.data.forEach(function(t,i){m?o.add(t.x,t.y):o.add(i,t)});var x=s.getPixelForValue(o.minx),c=s.getPixelForValue(o.maxx),f=a.getPixelForValue(o.f(o.minx)),X=a.getPixelForValue(o.f(o.maxx));m||(x=d,c=l),i.lineWidth=r,"dotted"===h&&i.setLineDash([2,3]),i.beginPath(),i.moveTo(x,f),i.lineTo(c,X),i.strokeStyle=n,i.stroke()}function LineFitter(){this.count=0,this.sumX=0,this.sumX2=0,this.sumXY=0,this.sumY=0,this.minx=1e100,this.maxx=-1e100}Chart.plugins.register(pluginTrendlineLinear),LineFitter.prototype={add:function(t,i){this.count++,this.sumX+=t,this.sumX2+=t*t,this.sumXY+=t*i,this.sumY+=i,t<this.minx&&(this.minx=t),t>this.maxx&&(this.maxx=t)},f:function(t){var i=this.count*this.sumX2-this.sumX*this.sumX;return(this.sumX2*this.sumY-this.sumX*this.sumXY)/i+t*((this.count*this.sumXY-this.sumX*this.sumY)/i)}};